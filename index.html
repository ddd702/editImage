<!DOCTYPE html>
<html>

<head>
    <title>图片处理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <meta content="telephone=no" name="format-detection" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="css/bootstrap/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/dialog.css">
</head>

<body>
    <div class="container">
        <!--图片输出选项－s-->
        <div class="modal bs-example-modal-sm" id="j-outputModal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                        <h4 class="modal-title">图片输出品质</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label for="imgName" class="col-sm-5 control-label">图片名称：</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control" name="imgName" placeholder="图片名称">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="imgName" class="col-sm-5 control-label">图片格式：</label>
                                <div class="col-sm-7">
                                    <input type="radio" style="margin:10px 10px 0 10px" name="imgType" value="image/jpeg" checked>jpg
                                    <input type="radio" style="margin:10px 10px 0 10px" name="imgType" value="image/png">png
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="imgQuality" class="col-sm-5 control-label">图片品质(对png格式图片无效)：</label>
                                <div class="col-sm-7">
                                    <input type="number" name="imgQuality" class="form-control" />
                                    <div class="dslider" style="width:150px; margin-left:0" id="slider2" data-cell="imgQuality">
                                        <div class="cross"></div>
                                        <div class="handler"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" id="j-downPic">确定</button>
                        <div id="j-link" class="pull-left"></div>
                    </div>
                </div>
            </div>
        </div>
        <!--图片输出选项－e-->
        <section id="j-form">
            <div class="form-group">
                <label>File input</label>
                <input type="file" multiple accept="image/*" id="j-fileInput">
            </div>
            <div class="content-box" id="j-contentBox">
            </div>
            <div class="edit-box" id="j-editBox">
                <span class="glyphicon glyphicon-remove" id="j-editClose"></span>
                <div class="canvas-box">
                    <canvas id='j-canvas'>
                    </canvas>
                </div>
                <footer class="edit-btns text-center">
                    <div class="slider-wrap">
                    <div class="dslider" id="slider1" data-cell="slider1">
                            <div class="cross"></div>
                            <div class="handler"></div>
                        </div>
                        <div class="form-inline">
                            <label>缩放(%)</label>
                            <input type="number" name="slider1" class="form-control" />
                        </div>
                        
                    </div>
                    <div class="form-inline">
                        <label>灰度</label>
                        <input type="number" class="form-control" id="j-grey" />
                    </div>
                    <span class="btn btn-success btn-block" id="j-getColor">取色</span>
                    <span class="btn btn-success btn-block" id="j-getCut">截取</span>
                    <span class="btn btn-success btn-block" data-toggle="modal" data-target="#j-outputModal"> 导出当前图片</span>
                    <div class="color-cell">
                        <p>图片信息：</p>
                        <p id="j-editImgSize"></p>
                        <p id="j-editImgName"></p>
                    </div>
                    <div class="color-cell">
                        <p>取色信息显示：</p>
                        <span id="j-colorPicker" class="color-picker"></span>
                        <span id="j-colorHex"></span>
                    </div>
                </footer>
            </div>
        </section>
    </div>
    <script id="t-imgText" type="text/template">
        <span>文件名：<&=name&></span><span>尺寸：<&=nW&>x<&=nH&></span><span>文件大小:<&=byteConvert(size)&></span><span>修改时间：
        <&=D.utils.dateFormat(modifiedTime,'yyyy年MM月dd hh:mm:ss')&></span>
    </script>
    <script type="text/javascript" src="js/libs/requirejs/require.js"></script>
    <script type="text/javascript" src="js/require.config.js"></script>
    <script type="text/javascript">
    require(['main'], function(main) {
        var inputEle = document.querySelector('#j-fileInput');
        var canvasEle = document.querySelector('#j-contentBox');
        window.ddd = new main(canvasEle, inputEle);
    });
    </script>
</body>

</html>
