(function(t){function e(e){for(var i,o,s=e[0],l=e[1],c=e[2],u=0,m=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);f&&f(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},n={app:0},r=[];function o(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"f08bc32b"}[t]+".js"}function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(t){var e=[],a=n[t];if(0!==a)if(a)e.push(a[2]);else{var i=new Promise(function(e,i){a=n[t]=[e,i]});e.push(a[2]=i);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=o(t);var c=new Error;r=function(e){l.onerror=l.onload=null,clearTimeout(u);var a=n[t];if(0!==a){if(a){var i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",c.name="ChunkLoadError",c.type=i,c.request=r,a[1](c)}n[t]=void 0}};var u=setTimeout(function(){r({type:"timeout",target:l})},12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var f=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){a("56d7"),t.exports=a("db4d")},"0304":function(t,e,a){"use strict";var i=a("e5c6"),n=a.n(i);n.a},"4f31":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-body"},[a("router-view")],1)},r=[],o=(a("5c0b"),a("2877")),s={},l=Object(o["a"])(s,n,r,!1,null,null,null),c=l.exports,u=a("8c4f"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home-page"},[a("el-upload",{staticClass:"upload-btn",attrs:{drag:"",action:"",multiple:"","before-upload":t.beforeUpload,"on-change":t.fileChange}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])]),a("div",{staticClass:"img-list"},t._l(t.fileList,function(e,i){return a("div",{key:i,staticClass:"img-item"},[a("div",{staticClass:"img-cell"},[a("img",{staticClass:"img-el",attrs:{title:e.imageInfo.name,src:e.imageSrc}})]),a("div",{staticClass:"img-info"},[a("p",[t._v("文件名："+t._s(e.imageInfo.name))]),a("p",[t._v("尺寸："+t._s(e.imageInfo.w)+"*"+t._s(e.imageInfo.h))]),a("p",[t._v("\n          修改时间:"+t._s(t.dateFormat(e.imageInfo.modifyTime))+"\n        ")]),a("p",[t._v("\n          文件大小:"+t._s(t.byteSize(e.imageInfo.size))+"\n        ")])]),a("div",{staticClass:"btns"},[a("div",{staticClass:"danger btn",on:{click:function(e){return t.toDel(i)}}},[t._v("删除")]),a("div",{staticClass:"primary btn",on:{click:function(a){return t.toEdit(e)}}},[t._v("编辑")])])])}),0),a("edit-dialog",{ref:"editDialog"})],1)},m=[],g=(a("96cf"),a("3b8d")),d=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-box"},[a("el-dialog",{staticClass:"edit-dialog",attrs:{visible:t.visible,fullscreen:!0,"before-close":t.handleClose},on:{opened:t.afterOpen}},[a("el-container",[a("el-aside",{staticClass:"left-side"},[t.item?a("div",{staticClass:"item-info"},[a("p",[t._v("尺寸:"+t._s(parseInt(t.item.imageInfo.w*(t.scaleVal/100)))+"*"+t._s(parseInt(t.item.imageInfo.h*(t.scaleVal/100))))]),a("p",[t._v("文件名："+t._s(t.item.imageInfo.name))]),a("p",[t._v("\n            修改时间:"+t._s(t.dateFormat(t.item.imageInfo.modifyTime))+"\n          ")]),a("p",[t._v("\n            文件大小:"+t._s(t.byteSize(t.item.imageInfo.size))+"\n          ")])]):t._e(),a("el-slider",{attrs:{"format-tooltip":t.scaleTips,max:300,min:10},on:{input:t.changeScale},model:{value:t.scaleVal,callback:function(e){t.scaleVal=e},expression:"scaleVal"}}),a("el-slider",{attrs:{"format-tooltip":t.greyTips,max:10,min:0},on:{change:t.changeGrey},model:{value:t.greyVal,callback:function(e){t.greyVal=e},expression:"greyVal"}}),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.setRGBMode}},[t._v(t._s("rgb"==t.mode?"取消取色":"取色"))]),a("div",{directives:[{name:"show",rawName:"v-show",value:"rgb"===t.mode,expression:"mode==='rgb'"}],staticClass:"rgb-cell"},[a("div",{staticClass:"rgb-span",style:{backgroundColor:"#"+t.rgb}}),a("p",[t._v("#"+t._s(t.rgb))]),a("p",[t._v("rgba("+t._s(t.r)+","+t._s(t.g)+","+t._s(t.b)+","+t._s(t.a)+")")])])],1),a("el-button",{attrs:{type:"success"},on:{click:t.openExport}},[t._v("导出图片")])],1),a("el-main",{staticClass:"edit-con"},[a("canvas",{class:{"get-rgb":"rgb"==t.mode},attrs:{id:"canvas"},on:{click:t.clickCanvas}})])],1)],1),a("export-dialog",{ref:"exportDialog"})],1)}),p=[],h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"export-box"},[a("el-dialog",{attrs:{title:"图片导出",visible:t.visible,width:"30%"},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"form",attrs:{"label-position":"top",model:t.form}},[a("el-form-item",{attrs:{label:"图片名称"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"图片格式"}},[a("el-radio-group",{model:{value:t.form.format,callback:function(e){t.$set(t.form,"format",e)},expression:"form.format"}},[a("el-radio",{attrs:{label:"image/jpeg"}},[t._v("jpg")]),a("el-radio",{attrs:{label:"image/png"}},[t._v("png")])],1)],1),a("el-form-item",{attrs:{label:"图片品质(对png格式图片无效)"}},[a("div",{staticStyle:{padding:"40px"}},[a("el-slider",{attrs:{max:100},model:{value:t.form.quality,callback:function(e){t.$set(t.form,"quality",e)},expression:"form.quality"}})],1)])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.saveImg}},[t._v("导出")])],1)],1)],1)},v=[],b={data:function(){return{form:{name:"",format:"image/jpeg",quality:100},visible:!1,canvas:null}},methods:{saveImg:function(){var t,e=function(t,e){var a=document.createElementNS("http://www.w3.org/1999/xhtml","a");a.href=t,a.download=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(i)},a={quality:parseInt(this.quality)/100,name:this.form.name,type:this.form.format},i=this.canvas.toDataURL(a.type,a.quality);switch(a.type){case"image/jpeg":t=a.name+".jpg";break;case"image/png":t=a.name+".png";break;default:t=a.name+".jpg"}e(i,t)},init:function(t,e){this.canvas=t,this.visible=!0,this.format="jpg",this.quality=100,this.name="",this.form.name=e.name}},mounted:function(){}},y=b,w=(a("a4cb"),Object(o["a"])(y,h,v,!1,null,null,null)),x=w.exports,_=(a("6b54"),{data:function(){return{r:0,g:0,b:0,a:0,rgb:"",mode:"",scaleVal:100,originImgData:null,greyVal:0}},methods:{rgbToHex:function(t,e,a){return(t<<16|e<<8|a).toString(16)},drawImg:function(){if(this.ctx){var t=this.item.imageInfo.w*(this.scaleVal/100),e=this.item.imageInfo.h*(this.scaleVal/100);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.setAttribute("width",t),this.canvas.setAttribute("height",e),this.ctx.drawImage(this.item.imageEl,0,0,t,e),this.originImgData=this.ctx.getImageData(0,0,t,e),this.imgGrey()}else console.log("canvas节点尚未初始化")},clickCanvas:function(t){if("rgb"===this.mode){var e=this.ctx.getImageData(t.offsetX,t.offsetY,1,1).data,a=e[0],i=e[1],n=e[2],r=e[3];this.rgb=this.rgbToHex(a,i,n),this.r=a,this.g=i,this.b=n,this.a=(r/255).toFixed(1)}},imgGrey:function(){var t=parseFloat(this.greyVal);if(this.ctx){var e=new ImageData(this.originImgData.width,this.originImgData.height);e.data.set(this.originImgData.data);var a=e.data;if(0!==t){t=1/t;for(var i=0,n=a.length;i<n;i+=4){var r=.3*a[i]*t+.59*a[i+1]*t+.11*a[i+2]*t;a[i]=r,a[i+1]=r,a[i+2]=r}}this.ctx.putImageData(e,0,0)}else console.log("canvas节点尚未初始化")}}}),I={name:"editDialog",data:function(){return{ctx:null,canvas:null,visible:!1,item:null}},mixins:[_],props:{msg:String},components:{exportDialog:x},methods:{setRGBMode:function(){"rgb"===this.mode?this.mode="":this.mode="rgb"},openExport:function(){this.$refs.exportDialog.init(this.canvas,this.item.imageInfo)},scaleTips:function(t){return"缩放"+t+"%"},greyTips:function(t){return"灰度"+t},handleClose:function(){this.visible=!1},changeScale:function(t){this.scaleVal=t,this.drawImg()},changeGrey:function(t){this.greyVal=t,this.drawImg()},init:function(t){this.visible=!0,this.item=t,this.scaleVal=100,this.greyVal=0},afterOpen:function(){this.canvas||(this.canvas=document.querySelector("#canvas"),this.ctx=this.canvas.getContext("2d")),this.drawImg()}}},C=I,E=(a("0304"),Object(o["a"])(C,d,p,!1,null,null,null)),k=E.exports,j={name:"home",data:function(){return{fileList:[]}},components:{EditDialog:k},methods:{toDel:function(t){this.fileList.splice(t,1)},toEdit:function(t){this.$refs.editDialog.init(t)},beforeUpload:function(){return!1},handleRemove:function(t,e){console.warn("rm",t,e)},readFile:function(t,e){var a=this,i=new FileReader;i.readAsDataURL(t),i.onload=function(t){var i=new Image;i.src=t.target.result,i.onload=function(){var n=i.naturalWidth,r=i.naturalHeight;a.fileList[e].imageEl=i,a.fileList[e].imageInfo.w=n,a.fileList[e].imageInfo.h=r,a.fileList[e].imageSrc=t.target.result}}},fileChange:function(t,e){console.warn("preview",t,e),this.fileList.push({file:t.raw,imageEl:null,imageInfo:{w:"",h:"",name:t.raw.name,size:t.raw.size,modifyTime:t.raw.lastModified},imageSrc:null}),this.readFile(t.raw,this.fileList.length-1)},init:function(){var t=Object(g["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.init()}},D=j,M=(a("95c4"),Object(o["a"])(D,f,m,!1,null,null,null)),S=M.exports;i["default"].use(u["a"]);var O=new u["a"]({routes:[{path:"/",name:"home",component:S},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]}),V=a("2f62");i["default"].use(V["a"]);var T=new V["a"].Store({state:{},mutations:{},actions:{}}),R=(a("3b2b"),a("a481"),{methods:{byteSize:function(t){if(t<1e3)return t+"B";var e=1e3,a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,i)).toPrecision(3)+" "+a[i]},dateFormat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss",a=new Date(parseInt(t,10)),i={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return e}}}),$=a("5c96"),L=a.n($);a("0fae");i["default"].use(L.a),i["default"].config.productionTip=!1,i["default"].mixin(R),new i["default"]({router:O,store:T,render:function(t){return t(c)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var i=a("e332"),n=a.n(i);n.a},6231:function(t,e,a){},"95c4":function(t,e,a){"use strict";var i=a("6231"),n=a.n(i);n.a},a4cb:function(t,e,a){"use strict";var i=a("4f31"),n=a.n(i);n.a},e332:function(t,e,a){},e5c6:function(t,e,a){}});
//# sourceMappingURL=app.a823e55c.js.map